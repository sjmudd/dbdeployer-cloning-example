$ ./clone_script 
[16:26:09] ==> server1 has port 18001, server2 has port 18002, gtid_mode: ON
[16:26:09] ==> building empty server1
Database installed in $HOME/sandboxes/server1_8_0_17
run 'dbdeployer usage single' for basic instructions'
.. sandbox server started
[16:26:14] ==> building empty server2
Database installed in $HOME/sandboxes/server2_8_0_17
run 'dbdeployer usage single' for basic instructions'
.. sandbox server started
[16:26:20] ==> populating server1 with data
INFO
CREATING DATABASE STRUCTURE
INFO
storage engine: InnoDB
INFO
LOADING departments
INFO
LOADING employees
INFO
LOADING dept_emp
INFO
LOADING dept_manager
INFO
LOADING titles
INFO
LOADING salaries
data_load_time_diff
00:00:49
+---------------+--------------------------------------------+
| @@global.port | @@global.gtid_executed                     |
+---------------+--------------------------------------------+
|         18001 | 00018001-0000-0000-0000-000000018001:1-210 |
+---------------+--------------------------------------------+
[16:27:10] ==> cloning server2 from server1
+---------------+--------------------------------------------+
| @@global.port | @@global.gtid_executed                     |
+---------------+--------------------------------------------+
|         18002 | 00018001-0000-0000-0000-000000018001:1-210 |
+---------------+--------------------------------------------+
[16:27:17] ==> dropping some tables on server2 (by mistake)
[16:27:17] ==> - titles 
[16:27:17] ==> - salaries 
[16:27:17] ==> - dept_manager 
[16:27:17] ==> - dept_emp 
[16:27:17] ==> - departments 
[16:27:17] ==> - employees 
+---------------+--------------------------------------------------------------------------------------+
| @@global.port | @@global.gtid_executed                                                               |
+---------------+--------------------------------------------------------------------------------------+
|         18002 | 00018001-0000-0000-0000-000000018001:1-210,
00018002-0000-0000-0000-000000018002:1-6 |
+---------------+--------------------------------------------------------------------------------------+
[16:27:17] ==> cloning server2 again from server1
+---------------+--------------------------------------------+
| @@global.port | @@global.gtid_executed                     |
+---------------+--------------------------------------------+
|         18002 | 00018001-0000-0000-0000-000000018001:1-210 |
+---------------+--------------------------------------------+
[16:27:22] ==> dropping employee db on server1 (by mistake)
+---------------+--------------------------------------------+
| @@global.port | @@global.gtid_executed                     |
+---------------+--------------------------------------------+
|         18001 | 00018001-0000-0000-0000-000000018001:1-211 |
+---------------+--------------------------------------------+
[16:27:22] ==> add some local data to server2
+---------------+--------------------------------------------------------------------------------------+
| @@global.port | @@global.gtid_executed                                                               |
+---------------+--------------------------------------------------------------------------------------+
|         18002 | 00018001-0000-0000-0000-000000018001:1-210,
00018002-0000-0000-0000-000000018002:1-3 |
+---------------+--------------------------------------------------------------------------------------+
[16:27:22] ==> cloning server1 from server2
+---------------+--------------------------------------------------------------------------------------+
| @@global.port | @@global.gtid_executed                                                               |
+---------------+--------------------------------------------------------------------------------------+
|         18001 | 00018001-0000-0000-0000-000000018001:1-210,
00018002-0000-0000-0000-000000018002:1-3 |
+---------------+--------------------------------------------------------------------------------------+
[16:27:28] ==> Script completed successfully
$
